openapi: 3.0.1
info:
  contact:
    email: info@flowpipe.io
    name: Flowpipe
    url: http://www.flowpipe.io
  description: Flowpipe is workflow and pipelines for DevSecOps.
  license:
    name: AGPLv3
    url: https://www.gnu.org/licenses/agpl-3.0.en.html
  title: Flowpipe
  version: 0.1.0
servers:
- url: https://localhost/api/v0
paths:
  /mod/{mod_name}:
    get:
      description: Get mod
      operationId: mod_get
      parameters:
      - description: The name of the mod
        explode: false
        in: path
        name: mod_name
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Mod'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get mod
      tags:
      - Mod
  /pipeline:
    get:
      description: Lists pipelines
      operationId: pipeline_list
      parameters:
      - description: "The max number of items to fetch per page of data, subject to\
          \ a min and max of 1 and 100 respectively. If not specified will default\
          \ to 25."
        explode: true
        in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          type: integer
        style: form
      - description: "When list results are truncated, next_token will be returned,\
          \ which is a cursor to fetch the next page of data. Pass next_token to the\
          \ subsequent list request to fetch the next page of data."
        explode: true
        in: query
        name: next_token
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListPipelineResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: List pipelines
      tags:
      - Pipeline
  /pipeline/{pipeline_name}:
    get:
      description: Get pipeline
      operationId: pipeline_get
      parameters:
      - description: The name of the pipeline
        explode: false
        in: path
        name: pipeline_name
        required: true
        schema:
          format: "^[a-z_]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FpPipeline'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get pipeline
      tags:
      - Pipeline
  /pipeline/{pipeline_name}/cmd:
    post:
      operationId: pipeline_cmd
      parameters:
      - description: The name of the pipeline
        explode: false
        in: path
        name: pipeline_name
        required: true
        schema:
          format: "^[a-z_]{0,32}$"
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CmdPipeline'
        description: Pipeline command.
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PipelineExecutionResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Execute a pipeline command
      tags:
      - Pipeline
      x-codegen-request-body-name: request
  /process:
    get:
      description: Lists processs
      operationId: process_list
      parameters:
      - description: "The max number of items to fetch per page of data, subject to\
          \ a min and max of 1 and 100 respectively. If not specified will default\
          \ to 25."
        explode: true
        in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          type: integer
        style: form
      - description: "When list results are truncated, next_token will be returned,\
          \ which is a cursor to fetch the next page of data. Pass next_token to the\
          \ subsequent list request to fetch the next page of data."
        explode: true
        in: query
        name: next_token
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProcessResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: List processs
      tags:
      - Process
  /process/:process_id/log/process.sps:
    get:
      description: Get process snapshot
      operationId: process_get_snapshot
      parameters:
      - description: The id of the process
        explode: false
        in: path
        name: process_id
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/execution.Snapshot'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get process snapshot
      tags:
      - Process
  /process/{process_id}:
    get:
      description: Get process
      operationId: process_get
      parameters:
      - description: The name of the process
        explode: false
        in: path
        name: process_id
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Process'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get process
      tags:
      - Process
  /process/{process_id}/execution:
    get:
      description: Get process execution
      operationId: process_get_execution
      parameters:
      - description: The name of the process
        explode: false
        in: path
        name: process_id
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/execution.Execution'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get process execution
      tags:
      - Process
  /process/{process_id}/log/process.json:
    get:
      description: Get process log
      operationId: process_get_log
      parameters:
      - description: The id of the process
        explode: false
        in: path
        name: process_id
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProcessLogJSONResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get process log
      tags:
      - Process
  /process/{process_id}/output:
    get:
      description: Get process output
      operationId: process_get_output
      parameters:
      - description: The name of the process
        explode: false
        in: path
        name: process_id
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProcessOutputData'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get process output
      tags:
      - Process
  /trigger:
    get:
      description: Lists triggers
      operationId: trigger_list
      parameters:
      - description: "The max number of items to fetch per page of data, subject to\
          \ a min and max of 1 and 100 respectively. If not specified will default\
          \ to 25."
        explode: true
        in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          type: integer
        style: form
      - description: "When list results are truncated, next_token will be returned,\
          \ which is a cursor to fetch the next page of data. Pass next_token to the\
          \ subsequent list request to fetch the next page of data."
        explode: true
        in: query
        name: next_token
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListTriggerResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: List triggers
      tags:
      - Trigger
  /trigger/{trigger_name}:
    get:
      description: Get trigger
      operationId: trigger_get
      parameters:
      - description: The name of the trigger
        explode: false
        in: path
        name: trigger_name
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FpTrigger'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get trigger
      tags:
      - Trigger
  /variable:
    get:
      description: Lists variables
      operationId: variable_list
      parameters:
      - description: "The max number of items to fetch per page of data, subject to\
          \ a min and max of 1 and 100 respectively. If not specified will default\
          \ to 25."
        explode: true
        in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          type: integer
        style: form
      - description: "When list results are truncated, next_token will be returned,\
          \ which is a cursor to fetch the next page of data. Pass next_token to the\
          \ subsequent list request to fetch the next page of data."
        explode: true
        in: query
        name: next_token
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListVariableResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: List variables
      tags:
      - Variable
  /variable/{variable_name}:
    get:
      description: Get variable
      operationId: variable_get
      parameters:
      - description: The name of the variable
        explode: false
        in: path
        name: variable_name
        required: true
        schema:
          format: "^[a-z]{0,32}$"
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Variable'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Forbidden
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Not Found
        "429":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/perr.ErrorModel'
          description: Internal Server Error
      summary: Get variable
      tags:
      - Variable
components:
  schemas:
    CmdPipeline:
      example:
        args:
          key: ""
        args_string:
          key: args_string
        execution_mode: synchronous
        wait_retry: 0
        command: run
      properties:
        args:
          additionalProperties: true
          type: object
        args_string:
          additionalProperties:
            type: string
          type: object
        command:
          enum:
          - run
          type: string
        execution_mode:
          enum:
          - synchronous
          - asynchronous
          type: string
        wait_retry:
          type: integer
      required:
      - command
      type: object
    FpPipeline:
      example:
        outputs:
        - depends_on:
          - depends_on
          - depends_on
          name: name
          description: description
          value: "{}"
          resolved: true
        - depends_on:
          - depends_on
          - depends_on
          name: name
          description: description
          value: "{}"
          resolved: true
        mod: mod
        documentation: documentation
        name: name
        description: description
        params:
        - default: "{}"
          name: name
          description: description
          optional: true
          type: type
        - default: "{}"
          name: name
          description: description
          optional: true
          type: type
        title: title
        steps:
        - "{}"
        - "{}"
        tags:
          key: tags
      properties:
        description:
          type: string
        documentation:
          type: string
        mod:
          type: string
        name:
          type: string
        outputs:
          items:
            $ref: '#/components/schemas/modconfig.PipelineOutput'
          type: array
        params:
          items:
            $ref: '#/components/schemas/FpPipelineParam'
          type: array
        steps:
          items:
            type: object
          type: array
        tags:
          additionalProperties:
            type: string
          type: object
        title:
          type: string
      type: object
    FpPipelineParam:
      example:
        default: "{}"
        name: name
        description: description
        optional: true
        type: type
      properties:
        default:
          type: object
        description:
          type: string
        name:
          type: string
        optional:
          type: boolean
        type:
          type: string
      type: object
    FpTrigger:
      example:
        pipeline: pipeline
        schedule: schedule
        documentation: documentation
        name: name
        description: description
        title: title
        type: type
        url: url
        tags:
          key: tags
      properties:
        description:
          type: string
        documentation:
          type: string
        name:
          type: string
        pipeline:
          type: string
        schedule:
          type: string
        tags:
          additionalProperties:
            type: string
          type: object
        title:
          type: string
        type:
          type: string
        url:
          type: string
      type: object
    ListPipelineResponse:
      example:
        next_token: next_token
        items:
        - outputs:
          - depends_on:
            - depends_on
            - depends_on
            name: name
            description: description
            value: "{}"
            resolved: true
          - depends_on:
            - depends_on
            - depends_on
            name: name
            description: description
            value: "{}"
            resolved: true
          mod: mod
          documentation: documentation
          name: name
          description: description
          params:
          - default: "{}"
            name: name
            description: description
            optional: true
            type: type
          - default: "{}"
            name: name
            description: description
            optional: true
            type: type
          title: title
          steps:
          - "{}"
          - "{}"
          tags:
            key: tags
        - outputs:
          - depends_on:
            - depends_on
            - depends_on
            name: name
            description: description
            value: "{}"
            resolved: true
          - depends_on:
            - depends_on
            - depends_on
            name: name
            description: description
            value: "{}"
            resolved: true
          mod: mod
          documentation: documentation
          name: name
          description: description
          params:
          - default: "{}"
            name: name
            description: description
            optional: true
            type: type
          - default: "{}"
            name: name
            description: description
            optional: true
            type: type
          title: title
          steps:
          - "{}"
          - "{}"
          tags:
            key: tags
      properties:
        items:
          items:
            $ref: '#/components/schemas/FpPipeline'
          type: array
        next_token:
          type: string
      type: object
    ListProcessLogJSONResponse:
      example:
        next_token: next_token
        items:
        - event_type: event_type
          payload: payload
          ts: ts
        - event_type: event_type
          payload: payload
          ts: ts
      properties:
        items:
          items:
            $ref: '#/components/schemas/ProcessEventLog'
          type: array
        next_token:
          type: string
      type: object
    ListProcessResponse:
      example:
        next_token: next_token
        items:
        - pipeline: pipeline
          execution_id: execution_id
          created_at: created_at
          status: status
        - pipeline: pipeline
          execution_id: execution_id
          created_at: created_at
          status: status
      properties:
        items:
          items:
            $ref: '#/components/schemas/Process'
          type: array
        next_token:
          type: string
      type: object
    ListTriggerResponse:
      example:
        next_token: next_token
        items:
        - pipeline: pipeline
          schedule: schedule
          documentation: documentation
          name: name
          description: description
          title: title
          type: type
          url: url
          tags:
            key: tags
        - pipeline: pipeline
          schedule: schedule
          documentation: documentation
          name: name
          description: description
          title: title
          type: type
          url: url
          tags:
            key: tags
      properties:
        items:
          items:
            $ref: '#/components/schemas/FpTrigger'
          type: array
        next_token:
          type: string
      type: object
    ListVariableResponse:
      example:
        next_token: next_token
        items:
        - default: "{}"
          name: name
          description: description
          type: type
          value: "{}"
        - default: "{}"
          name: name
          description: description
          type: type
          value: "{}"
      properties:
        items:
          items:
            $ref: '#/components/schemas/Variable'
          type: array
        next_token:
          type: string
      type: object
    Mod:
      example:
        color: color
        documentation: documentation
        name: name
        description: description
        categories:
        - categories
        - categories
        title: title
        opengraph:
          description: description
          title: title
      properties:
        categories:
          items:
            type: string
          type: array
        color:
          type: string
        description:
          type: string
        documentation:
          type: string
        name:
          type: string
        opengraph:
          $ref: '#/components/schemas/OpenGraph'
        title:
          type: string
      type: object
    OpenGraph:
      example:
        description: description
        title: title
      properties:
        description:
          description: "The opengraph description (og:description) of the mod, for\
            \ use in social media applications"
          type: string
        title:
          type: string
      type: object
    PipelineExecutionResponse:
      additionalProperties: true
      type: object
    Process:
      example:
        pipeline: pipeline
        execution_id: execution_id
        created_at: created_at
        status: status
      properties:
        created_at:
          type: string
        execution_id:
          type: string
        pipeline:
          type: string
        status:
          type: string
      type: object
    ProcessEventLog:
      example:
        event_type: event_type
        payload: payload
        ts: ts
      properties:
        event_type:
          type: string
        payload:
          description: "Setting the type as string for now, as the CLI need to print\
            \ the payload"
          type: string
        ts:
          type: string
      type: object
    ProcessOutputData:
      example:
        output:
          key: ""
        process_id: process_id
      properties:
        output:
          additionalProperties: true
          type: object
        process_id:
          type: string
      type: object
    Variable:
      example:
        default: "{}"
        name: name
        description: description
        type: type
        value: "{}"
      properties:
        default:
          type: object
        description:
          type: string
        name:
          type: string
        type:
          type: string
        value:
          type: object
      type: object
    execution.Execution:
      example:
        pipeline_executions:
          key:
            args: "{}"
            start_time: start_time
            step_status:
              key:
                key:
                  loop_hold: true
                  error_hold: true
                  queued:
                    key: true
                  finished:
                    key: true
                  initializing: true
                  started:
                    key: true
                  failed:
                    key: true
                  step_executions:
                  - pipeline_execution_id: pipeline_execution_id
                    end_time: end_time
                    output: null
                    step_for_each: null
                    step_loop:
                      input:
                        key: ""
                      loop_completed: true
                      index: 6
                    input: "{}"
                    start_time: start_time
                    step_retry:
                      input:
                        key: ""
                      count: 1
                      retry_completed: true
                    name: name
                    id: id
                    next_step_action: null
                    step_output:
                      key: ""
                    status: status
                  - pipeline_execution_id: pipeline_execution_id
                    end_time: end_time
                    output: null
                    step_for_each: null
                    step_loop:
                      input:
                        key: ""
                      loop_completed: true
                      index: 6
                    input: "{}"
                    start_time: start_time
                    step_retry:
                      input:
                        key: ""
                      count: 1
                      retry_completed: true
                    name: name
                    id: id
                    next_step_action: null
                    step_output:
                      key: ""
                    status: status
                  overral_state: overral_state
            parent_step_execution_id: parent_step_execution_id
            pipeline_output:
              key: ""
            end_time: end_time
            name: name
            id: id
            parent_execution_id: parent_execution_id
            errors:
            - pipeline: pipeline
              pipeline_execution_id: pipeline_execution_id
              step_execution_id: step_execution_id
              step: step
              error:
                instance: instance
                validation_errors:
                - location: location
                  message: message
                - location: location
                  message: message
                detail: detail
                title: title
                type: type
                status: 0
            - pipeline: pipeline
              pipeline_execution_id: pipeline_execution_id
              step_execution_id: step_execution_id
              step: step
              error:
                instance: instance
                validation_errors:
                - location: location
                  message: message
                - location: location
                  message: message
                detail: detail
                title: title
                type: type
                status: 0
            status: status
        id: id
      properties:
        id:
          description: Unique identifier for this execution.
          type: string
        pipeline_executions:
          additionalProperties:
            $ref: '#/components/schemas/execution.PipelineExecution'
          description: |-
            Pipelines triggered by the execution. Even if the pipelines are nested,
            we maintain a flat list of all pipelines for easy lookup and querying.
          type: object
      type: object
    execution.PipelineExecution:
      example:
        args: "{}"
        start_time: start_time
        step_status:
          key:
            key:
              loop_hold: true
              error_hold: true
              queued:
                key: true
              finished:
                key: true
              initializing: true
              started:
                key: true
              failed:
                key: true
              step_executions:
              - pipeline_execution_id: pipeline_execution_id
                end_time: end_time
                output: null
                step_for_each: null
                step_loop:
                  input:
                    key: ""
                  loop_completed: true
                  index: 6
                input: "{}"
                start_time: start_time
                step_retry:
                  input:
                    key: ""
                  count: 1
                  retry_completed: true
                name: name
                id: id
                next_step_action: null
                step_output:
                  key: ""
                status: status
              - pipeline_execution_id: pipeline_execution_id
                end_time: end_time
                output: null
                step_for_each: null
                step_loop:
                  input:
                    key: ""
                  loop_completed: true
                  index: 6
                input: "{}"
                start_time: start_time
                step_retry:
                  input:
                    key: ""
                  count: 1
                  retry_completed: true
                name: name
                id: id
                next_step_action: null
                step_output:
                  key: ""
                status: status
              overral_state: overral_state
        parent_step_execution_id: parent_step_execution_id
        pipeline_output:
          key: ""
        end_time: end_time
        name: name
        id: id
        parent_execution_id: parent_execution_id
        errors:
        - pipeline: pipeline
          pipeline_execution_id: pipeline_execution_id
          step_execution_id: step_execution_id
          step: step
          error:
            instance: instance
            validation_errors:
            - location: location
              message: message
            - location: location
              message: message
            detail: detail
            title: title
            type: type
            status: 0
        - pipeline: pipeline
          pipeline_execution_id: pipeline_execution_id
          step_execution_id: step_execution_id
          step: step
          error:
            instance: instance
            validation_errors:
            - location: location
              message: message
            - location: location
              message: message
            detail: detail
            title: title
            type: type
            status: 0
        status: status
      properties:
        args:
          allOf:
          - $ref: '#/components/schemas/modconfig.Input'
          description: The input to the pipeline
          type: object
        end_time:
          type: string
        errors:
          description: All errors from the step execution + any errors that can be
            added to the pipeline execution manually
          items:
            $ref: '#/components/schemas/modconfig.StepError'
          type: array
        id:
          description: Unique identifier for this pipeline execution
          type: string
        name:
          description: The name of the pipeline
          type: string
        parent_execution_id:
          type: string
        parent_step_execution_id:
          description: "If this is a child pipeline, then track it's parent"
          type: string
        pipeline_output:
          additionalProperties: true
          description: The output of the pipeline
          type: object
        start_time:
          type: string
        status:
          description: "The status of the pipeline execution: queued, planned, started,\
            \ completed, failed"
          type: string
        step_status:
          additionalProperties:
            additionalProperties:
              $ref: '#/components/schemas/execution.StepStatus'
            type: object
          description: "Status of each step on a per-step index basis. Used to determine\
            \ if dependencies\nhave been met etc. Note that each step may have multiple\
            \ executions, the status\nof which are not tracked here.\ndependencies\
            \ have been met, etc.\n\nThe Step Status used to be per-step, however\
            \ the addition of for_each means that we now need to expand this\ntracking\
            \ to include the \"index\" of the step\n\nfor_each have 2 type of results:\
            \ list or map, however in Flowpipe they are both treated as a map,\nthe\
            \ list is simply a map that the key happens to be a string of \"0\", \"\
            1\", \"2\"\n\n\t\tThe data structure of StepStatus is as follow:\n\t\t\
            {\n\t\t\t\"echo.echo\": {\n\t\t\t\t\"0\": {\n\t\t\t\t\txyz\n\t\t\t\t},\n\
            \t\t\t\t\"1\": {\n\t\t\t\t\txyz\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"http.one\"\
            : {\n\t\t\t\t\"foo\": {\n\t\t\t\t\tzzz\n\t\t\t\t},\n\t\t\t\t\"bar\": {\n\
            \t\t\t\t\tyyy\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\techo.echo has a for_each\
            \ which is a list, so the key is the index of the list\n\n\t\thttp.one\
            \ has a for_each which is a map, so the key is the key of the map\n\n\t\
            \tLOOP\n\n\t\tLoop will be recorded in StepStatus.StepExecution, it's\
            \ an array\n\t\t*"
          type: object
      type: object
    execution.Snapshot:
      example:
        layout:
          children:
          - null
          - null
          panel_type: panel_type
          name: name
        schema_version: schema_version
        start_time: start_time
        panels:
          key:
            display_type: display_type
            data:
              columns:
              - data_type: data_type
                name: name
              - data_type: data_type
                name: name
              rows:
              - null
              - null
            panel_type: panel_type
            name: name
            width: 0
            title: title
            dashboard: dashboard
            properties:
              key: ""
            status: status
        end_time: end_time
      properties:
        end_time:
          type: string
        layout:
          $ref: '#/components/schemas/execution.SnapshotLayout'
        panels:
          additionalProperties:
            $ref: '#/components/schemas/execution.SnapshotPanel'
          type: object
        schema_version:
          type: string
        start_time:
          type: string
      type: object
    execution.SnapshotLayout:
      example:
        children:
        - null
        - null
        panel_type: panel_type
        name: name
      properties:
        children:
          items:
            $ref: '#/components/schemas/execution.SnapshotLayout'
          type: array
        name:
          type: string
        panel_type:
          type: string
      type: object
    execution.SnapshotPanel:
      example:
        display_type: display_type
        data:
          columns:
          - data_type: data_type
            name: name
          - data_type: data_type
            name: name
          rows:
          - null
          - null
        panel_type: panel_type
        name: name
        width: 0
        title: title
        dashboard: dashboard
        properties:
          key: ""
        status: status
      properties:
        dashboard:
          type: string
        data:
          $ref: '#/components/schemas/execution.SnapshotPanelData'
        display_type:
          type: string
        name:
          type: string
        panel_type:
          type: string
        properties:
          additionalProperties: true
          type: object
        status:
          type: string
        title:
          type: string
        width:
          type: integer
      type: object
    execution.SnapshotPanelData:
      example:
        columns:
        - data_type: data_type
          name: name
        - data_type: data_type
          name: name
        rows:
        - null
        - null
      properties:
        columns:
          items:
            $ref: '#/components/schemas/execution.SnapshotPanelDataColumn'
          type: array
        rows:
          items:
            $ref: '#/components/schemas/execution.SnapshotPanelDataRow'
          type: array
      type: object
    execution.SnapshotPanelDataColumn:
      example:
        data_type: data_type
        name: name
      properties:
        data_type:
          type: string
        name:
          type: string
      type: object
    execution.SnapshotPanelDataRow:
      additionalProperties: true
      type: object
    execution.StepExecution:
      example:
        pipeline_execution_id: pipeline_execution_id
        end_time: end_time
        output: null
        step_for_each: null
        step_loop:
          input:
            key: ""
          loop_completed: true
          index: 6
        input: "{}"
        start_time: start_time
        step_retry:
          input:
            key: ""
          count: 1
          retry_completed: true
        name: name
        id: id
        next_step_action: null
        step_output:
          key: ""
        status: status
      properties:
        end_time:
          type: string
        id:
          type: string
        input:
          allOf:
          - $ref: '#/components/schemas/modconfig.Input'
          description: Input to the step
          type: object
        name:
          description: The name of the step in the pipeline definition
          type: string
        next_step_action:
          $ref: '#/components/schemas/modconfig.NextStepAction'
        output:
          $ref: '#/components/schemas/execution_StepExecution_output'
        pipeline_execution_id:
          description: Unique identifier for this step execution
          type: string
        start_time:
          type: string
        status:
          description: "The status of the step execution: \"started\", \"finished\"\
            , \"failed\", \"skipped\""
          type: string
        step_for_each:
          $ref: '#/components/schemas/execution_StepExecution_step_for_each'
        step_loop:
          $ref: '#/components/schemas/modconfig.StepLoop'
        step_output:
          additionalProperties: true
          description: "The output from the Step's output block:\noutput \"foo\" {\n\
            \   value = <xxx>\n\t}"
          type: object
        step_retry:
          $ref: '#/components/schemas/modconfig.StepRetry'
      type: object
    execution.StepStatus:
      example:
        loop_hold: true
        error_hold: true
        queued:
          key: true
        finished:
          key: true
        initializing: true
        started:
          key: true
        failed:
          key: true
        step_executions:
        - pipeline_execution_id: pipeline_execution_id
          end_time: end_time
          output: null
          step_for_each: null
          step_loop:
            input:
              key: ""
            loop_completed: true
            index: 6
          input: "{}"
          start_time: start_time
          step_retry:
            input:
              key: ""
            count: 1
            retry_completed: true
          name: name
          id: id
          next_step_action: null
          step_output:
            key: ""
          status: status
        - pipeline_execution_id: pipeline_execution_id
          end_time: end_time
          output: null
          step_for_each: null
          step_loop:
            input:
              key: ""
            loop_completed: true
            index: 6
          input: "{}"
          start_time: start_time
          step_retry:
            input:
              key: ""
            count: 1
            retry_completed: true
          name: name
          id: id
          next_step_action: null
          step_output:
            key: ""
          status: status
        overral_state: overral_state
      properties:
        error_hold:
          description: Indicates that a step is in retry loop so we don't mark it
            as failed
          type: boolean
        failed:
          additionalProperties:
            type: boolean
          description: Step executions that are failed.
          type: object
        finished:
          additionalProperties:
            type: boolean
          description: Step executions that are finished.
          type: object
        initializing:
          description: |-
            When the step is initializing it doesn't yet have any executions.
            We track it as initializing until the first execution is queued.
          type: boolean
        loop_hold:
          description: |-
            Both LoopHold and ErrorHold must be resolved **before** the "finish" event is called, i.e. it needs to be calculated at the
            end of "step start command" and "step pipeline finish" command.

            It can't be calculated at the "finish" event because it's already too late. If the planner see that it has an finish
            event without either a LoopHold or ErrorHold, it will mark the step as completed or failed

            Indicates that step is in a loop so we don't mark it as finished
          type: boolean
        overral_state:
          type: string
        queued:
          additionalProperties:
            type: boolean
          description: Step executions that are queued.
          type: object
        started:
          additionalProperties:
            type: boolean
          description: Step executions that are started.
          type: object
        step_executions:
          description: |-
            There's the step execution in execution, this is the same but in a list for a given step status
            The element in this slice should point to the same element in the StepExecutions map (in PipelineExecution)
          items:
            $ref: '#/components/schemas/execution.StepExecution'
          type: array
      type: object
    modconfig.Input:
      additionalProperties: true
      type: object
    modconfig.NextStepAction:
      enum:
      - start
      - inaccessible
      - skip
      type: string
      x-enum-varnames:
      - NextStepActionStart
      - NextStepActionInaccessible
      - NextStepActionSkip
    modconfig.Output:
      properties:
        data:
          additionalProperties: true
          type: object
        errors:
          items:
            $ref: '#/components/schemas/modconfig.StepError'
          type: array
        status:
          type: string
      type: object
    modconfig.OutputData:
      additionalProperties: true
      type: object
    modconfig.PipelineOutput:
      example:
        depends_on:
        - depends_on
        - depends_on
        name: name
        description: description
        value: "{}"
        resolved: true
      properties:
        depends_on:
          items:
            type: string
          type: array
        description:
          type: string
        name:
          type: string
        resolved:
          type: boolean
        value:
          type: object
      type: object
    modconfig.StepError:
      example:
        pipeline: pipeline
        pipeline_execution_id: pipeline_execution_id
        step_execution_id: step_execution_id
        step: step
        error:
          instance: instance
          validation_errors:
          - location: location
            message: message
          - location: location
            message: message
          detail: detail
          title: title
          type: type
          status: 0
      properties:
        error:
          $ref: '#/components/schemas/perr.ErrorModel'
        pipeline:
          type: string
        pipeline_execution_id:
          type: string
        step:
          type: string
        step_execution_id:
          type: string
      type: object
    modconfig.StepForEach:
      properties:
        for_each_step:
          type: boolean
        key:
          type: string
        output:
          $ref: '#/components/schemas/modconfig.Output'
        total_count:
          type: integer
      required:
      - key
      - total_count
      type: object
    modconfig.StepLoop:
      example:
        input:
          key: ""
        loop_completed: true
        index: 6
      properties:
        index:
          type: integer
        input:
          additionalProperties: true
          type: object
        loop_completed:
          type: boolean
      required:
      - index
      type: object
    modconfig.StepRetry:
      example:
        input:
          key: ""
        count: 1
        retry_completed: true
      properties:
        count:
          type: integer
        input:
          additionalProperties: true
          type: object
        retry_completed:
          type: boolean
      required:
      - count
      type: object
    perr.ErrorDetailModel:
      example:
        location: location
        message: message
      properties:
        location:
          type: string
        message:
          type: string
      type: object
    perr.ErrorModel:
      example:
        instance: instance
        validation_errors:
        - location: location
          message: message
        - location: location
          message: message
        detail: detail
        title: title
        type: type
        status: 0
      properties:
        detail:
          description: If we don't have required it comes out as pointer and there
            is a bug in the formatter
          type: string
        instance:
          type: string
        status:
          type: integer
        title:
          type: string
        type:
          type: string
        validation_errors:
          items:
            $ref: '#/components/schemas/perr.ErrorDetailModel'
          type: array
      required:
      - detail
      - instance
      - status
      - title
      - type
      type: object
    execution_StepExecution_output:
      allOf:
      - $ref: '#/components/schemas/modconfig.Output'
      description: Native/primitive output of the step
      type: object
    execution_StepExecution_step_for_each:
      allOf:
      - $ref: '#/components/schemas/modconfig.StepForEach'
      description: for_each controls
      type: object
  securitySchemes:
    ApiKeyAuth:
      in: header
      name: Authorization
      type: apiKey
x-original-swagger-version: "2.0"
